{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="{% static 'game_field.css' %}">
</head>
<body>
<nav class="navbar">
    <div class="logo">
        <img src="{% static 'image/LEGO_logo.svg.png' %}" alt="Bunker Logo">
        <span>BUNKER ONLINE</span>
    </div>
    <div class="menu">
        <a href="#home" class="active">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="#rules">–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</a>
        <a href="#wiki">–í–∏–∫–∏</a>
        <a href="#updates">–û–±–Ω–æ–≤–ª–µ–Ω–∏—è</a>
    </div>
</nav>
<main>
    <div class="sidebar">
        <p>–ú–µ–Ω—é</p>
        <ul>
            <li><a href="#1">1</a></li>
            <li><a href="#2">2</a></li>
            <li><a href="#3">3</a></li>
            <li><a href="#4">4</a></li>
            <li><a href="#5">5</a></li>
            <li><a href="#6">6</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>Game Start</h1>
        <h2>Player: {{ player.player_name }}</h2>
        <h2>Room: {{ room.name }}</h2>
        <h3>Bunker</h3>
        <p>–ë—ã–ª –ø–æ—Å—Ç—Ä–æ–µ–Ω {{ bunker.built_years_ago }} –ª–µ—Ç –Ω–∞–∑–∞–¥. {{ bunker.has_hygiene_facilities|yesno:"–ï—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –≥–∏–≥–∏–µ–Ω—ã,–ù–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤ –≥–∏–≥–∏–µ–Ω—ã" }}, {{ bunker.location_description }}, –≤—Å–µ —Å–ø–∞–ª—å–Ω–∏ –Ω–∞ {{ bunker.capacity }} —á–µ–ª–æ–≤–µ–∫</p>
        <p>–†–∞–∑–º–µ—Ä –±—É–Ω–∫–µ—Ä–∞: {{ bunker.size_sqm }} –∫–≤.–º</p>
        <p>–í—Ä–µ–º—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è: {{ bunker.duration_of_stay_years }} –≥–æ–¥</p>
        <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥—ã: –Ω–∞ {{ bunker.food_supply_years }} –≥–æ–¥–∞</p>
        <p>–í –±—É–Ω–∫–µ—Ä–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç:</p>
        <ul>
            {% for feature in bunker.features.all %}
                <li>{{ feature.name }}</li>
            {% endfor %}
        </ul>
        <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç –≤ –±—É–Ω–∫–µ—Ä–µ: {{ bunker.capacity }}</p>
        <h3>Cataclysm</h3>
        <p>{{ cataclysm.year }}: {{ cataclysm.description }}</p>
        <p>–í—Ä–µ–º—è –¥–æ –±—É–Ω–∫–µ—Ä–∞: {{ cataclysm.how_many_time_do_you_have }}</p>
        <p>–û—Å—Ç–∞–≤—à–µ–µ—Å—è –Ω–∞—Å–µ–ª–µ–Ω–∏–µ: {{ cataclysm.remaining_population }}</p>

        <h3>Player Information</h3>
        <table>
            <tr>
                <th>–ü–æ–ª</th>
                <td>{{ player.gender.name }}</td>
                <td><button class="locked" data-info="gender">üîí</button></td>
            </tr>
            <tr>
                <th>–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ</th>
                <td>{{ player.body_build.name }}</td>
                <td><button class="locked" data-info="body_build">üîí</button></td>
            </tr>
            <tr>
                <th>–ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∞—è —á–µ—Ä—Ç–∞</th>
                <td>{{ player.a_human_trait.name }}</td>
                <td><button class="locked" data-info="a_human_trait">üîí</button></td>
            </tr>
            <tr>
                <th>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</th>
                <td>{{ player.speciality.name }}</td>
                <td><button class="locked" data-info="speciality">üîí</button></td>
            </tr>
            <tr>
                <th>–ó–¥–æ—Ä–æ–≤—å–µ</th>
                <td>{{ player.health.name }}</td>
                <td><button class="locked" data-info="health">üîí</button></td>
            </tr>
            <tr>
                <th>–•–æ–±–±–∏ / –£–≤–ª–µ—á–µ–Ω–∏–µ</th>
                <td>{{ player.hobby.name }}</td>
                <td><button class="locked" data-info="hobby">üîí</button></td>
            </tr>
            <tr>
                <th>–§–æ–±–∏—è / –°—Ç—Ä–∞—Ö</th>
                <td>{{ player.phobia.name }}</td>
                <td><button class="locked" data-info="phobia">üîí</button></td>
            </tr>
            <tr>
                <th>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</th>
                <td>{{ player.inventory.name }}</td>
                <td><button class="locked" data-info="inventory">üîí</button></td>
            </tr>
            <tr>
                <th>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è</th>
                <td>{{ player.more_information.name }}</td>
                <td><button class="locked" data-info="more_information">üîí</button></td>
            </tr>
            <tr>
                <th>Special Feature 1</th>
                <td>{{ player.special_feature1.name }}</td>
                <td><button class="locked" data-info="special_feature1">üîí</button></td>
            </tr>
            <tr>
                <th>Special Feature 2</th>
                <td>{{ player.special_feature2.name }}</td>
                <td><button class="locked" data-info="special_feature2">üîí</button></td>
            </tr>
        </table>
        <h3>–ñ–µ–ª–∞—é—â–∏–µ –ø–æ–ø–∞—Å—Ç—å –≤ –±—É–Ω–∫–µ—Ä ({{ room.players.count }}/{{ bunker.capacity }})</h3>
        <table>
            <thead>
            <tr>
                <th>–ò–º—è</th>
                <th>–ü–æ–ª</th>
                <th>–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ</th>
                <th>–ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∞—è —á–µ—Ä—Ç–∞</th>
                <th>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</th>
                <th>–ó–¥–æ—Ä–æ–≤—å–µ</th>
                <th>–•–æ–±–±–∏ / –£–≤–ª–µ—á–µ–Ω–∏–µ</th>
                <th>–§–æ–±–∏—è / –°—Ç—Ä–∞—Ö</th>
                <th>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</th>
                <th>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è</th>
            </tr>
            </thead>
            <tbody id="players-info">
            {% for player in room.players.all %}
                <tr>
                    <td>{{ player.player_name }}</td>
                    <td class="locked" data-info="gender">üîí</td>
                    <td class="locked" data-info="body_build">üîí</td>
                    <td class="locked" data-info="a_human_trait">üîí</td>
                    <td class="locked" data-info="speciality">üîí</td>
                    <td class="locked" data-info="health">üîí</td>
                    <td class="locked" data-info="hobby">üîí</td>
                    <td class="locked" data-info="phobia">üîí</td>
                    <td class="locked" data-info="inventory">üîí</td>
                    <td class="locked" data-info="more_information">üîí</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <h3>–¢–∞–±–ª–∏—Ü–∞ —Å–ø–µ—Ü.–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π</h3>
        <table>
            <thead>
            <tr>
                <th>–ò–º—è</th>
                <th>–°–ø–µ—Ü.–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ‚Ññ1</th>
                <th>–°–ø–µ—Ü.–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ‚Ññ2</th>
            </tr>
            </thead>
            <tbody id="special-features-info">
            {% for player in room.players.all %}
                <tr>
                    <td>{{ player.player_name }}</td>
                    <td class="locked" data-info="special_feature1">üîí</td>
                    <td class="locked" data-info="special_feature2">üîí</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</main>
<script>
    $(document).ready(function() {
        $('.locked').click(function() {
            let $button = $(this);
            let infoType = $button.data('info');
            let infoValue = $button.closest('tr').find('td').eq(1).text();
            
            if (infoType.includes('special_feature')) {
                $('#special-features-info').find('td[data-info="' + infoType + '"]').each(function() {
                    if ($(this).closest('tr').find('td:first').text() !== '{{ player.player_name }}') {
                        $(this).removeClass('locked').text(infoValue);
                    }
                });
            } else {
                $('#players-info').find('td[data-info="' + infoType + '"]').each(function() {
                    if ($(this).closest('tr').find('td:first').text() !== '{{ player.player_name }}') {
                        $(this).removeClass('locked').text(infoValue);
                    }
                });
            }
            
            $button.removeClass('locked').addClass('unlocked').text('üîì');
        });
    });
</script>
</body>
</html>